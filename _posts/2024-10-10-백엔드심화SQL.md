---
layout: post
title:  "ë°±ì—”ë“œì‹¬í™”SQL"
excerpt: "ë°±ì—”ë“œì‹¬í™”SQL"
category: mysql
tags: [mysql]
date: '2024-10-10 15:00:00 +09:00'
last_modified_at: '2024-10-10'
---

# ğŸŒŠ ë°±ì—”ë“œì‹¬í™”SQL

<span style="color:lightseagreen">ğŸ’« **ë°±ì—”ë“œì‹¬í™”SQL**</span><br>

1. **"Board"ìŠ¤í‚¤ë§ˆ ìƒì„±**<br>
    ```sql
    CREATE DATABASE Board;
    USE Board;
    ```
    ![alt text](../_programmers/img01/image-189.png)<br>

2. **ì‚¬ìš©ì í…Œì´ë¸” ìƒì„±**<br>
- í…Œì´ë¸” ì´ë¦„ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë³µìˆ˜í˜• ì¶”ì²œ(í…Œì´ë¸” ì•ˆì— ì—¬ëŸ¬ ê°œê°€ ë“¤ì–´ê°€ë¯€ë¡œ)!<br>
- AUTO_INCREMENT : ìë™ ìˆ«ì ì¦ê°€(ê¸°ì… ê¸°ëŠ¥)<br>
    ```sql
    CREATE TABLE users (
        id INT NOT NULL AUTO_INCREMENT,
        name VARCHAR(30) NOT NULL,
        job VARCHAR(100),
        birth DATE,
        PRIMARY KEY (id)
    );
    ```
    ![alt text](../_programmers/img01/image-190.png)<br>

3. **ì‚¬ìš©ì ë°ì´í„° ì‚½ì…**<br>
- VALUES ("haerin", "idol","100101");ì„ í•´ë„ ìœ„ì˜ 2ë²ˆì—ì„œ birth DATEë•ë¶„ì— ìë™ìœ¼ë¡œ ì í˜€ì§! ê·¸ë˜ë„ ì…ë ¥í•  ë•Œ ë§ì¶°ì„œ ì…ë ¥í•´ì£¼ëŠ” ê²Œ ì¢‹ìŒ!<br>
- NOT NULL -> ë¬´ì¡°ê±´ ê°’ì„ ë„£ê¸°!(ì´ë¦„ì´ nullì´ì—¬ë„ X)<br>
    ```sql
    INSERT INTO users (name, job, birth)
    VALUES ("haerin", "idol","20060515");
    ```
    ```sql
    INSERT INTO users (name, job, birth)
    VALUES ("haerin", "student","2006-07-15");
    ```
    ```sql
    INSERT INTO users (name, job, birth)
    VALUES ("danielle", "idol","2005-04-11");
    ```    
    ```sql
    INSERT INTO users (name, job, birth)
    VALUES ("minji", "idol","2004-05-07");
    ```  
    ```sql
    INSERT INTO users (name, job, birth)
    VALUES ("hanni", "idol","2004-10-06");
    ```  
    ![alt text](../_programmers/img01/image-192.png)<br>

4. **ê²Œì‹œê¸€ í…Œì´ë¸” ìƒì„±**<br>
- ì‘ì„± ì¼ì : created_at(ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©)<br>
- ìˆ˜ì • ì¼ì : updated_at(ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©)<br>
    ```sql
    CREATE TABLE posts (
        id INT NOT NULL AUTO_INCREMENT,
        title VARCHAR(100) NOT NULL,
        content VARCHAR(2000),
        created_at TIMESTAMP DEFAULT NOW(),
        PRIMARY KEY (id)
    );
    ```
    ![alt text](../_programmers/img01/image-191.png)<br>

5. **ê²Œì‹œê¸€ ë°ì´í„° ì‚½ì…**<br>
- TIMESTAMP DEFAULT NOW()ì„ í†µí•´ created_at ê°’ì„ ì ì§€ ì•Šì•„ë„ ìë™ì…ë ¥ë¨!<br>
    ```sql
    INSERT INTO posts (title, content)
    VALUES ("title1", "content1");
    ```
    ![alt text](../_programmers/img01/image-193.png)<br>

6. **ê²Œì‹œê¸€ í…Œì´ë¸”ì— ìˆ˜ì •ì¼ì ì¶”ê°€**<br>
- ALTERì„ í†µí•´ ìˆ˜ì •ì¼ìë¥¼ ì¶”ê°€í•˜ê¸°<br>
    ```sql
    ALTER TABLE posts
    ADD COLUMN updated_at DATETIME
    DEFAULT NOW()
    ON UPDATE NOW();
    ```
    ![alt text](../_programmers/img01/image-194.png)<br>

7. **ê²Œì‹œê¸€ í…Œì´ë¸” id 2 ìˆ˜ì •**<br>
- UPDATEë¥¼ ì´ìš©í•˜ì—¬ updateëœ ì‹œê°„ ê°±ì‹ í•´ë³´ê¸°<br>
    ```sql
    UPDATE posts
    SET content="updated!"
    WHERE id = 2;
    ```
    ![alt text](../_programmers/img01/image-195.png)<br>

8. **ê²Œì‹œê¸€ í…Œì´ë¸”ì— ì‘ì„±ì ì»¬ëŸ¼ FK ì¶”ê°€**<br>
- MUL(MULTIPLE) : ê¸°ë³¸í‚¤ ê°’ì„ ê°€ì ¸ë‹¤ ì“°ê³  ìˆëŠ” ì™¸ë˜í‚¤ì§€ë§Œ ì¤‘ë³µì´ ê°€ëŠ¥í•˜ë¯€ë¡œ MUL!<br>
    ```sql
    ALTER TABLE posts
    ADD COLUMN user_id INT;
    ```
    ```sql
    ALTER TABLE posts
    ADD FOREIGN KEY(user_id)
    REFERENCES users(id);
    ```
    ![alt text](../_programmers/img01/image-196.png)<br><br>
    [**FK ì œì•½ì¡°ê±´ ì´ë¦„ ì§“ê¸°**]<br>
    fk_ê¸°ì¤€ í…Œì´ë¸”ëª…_ì°¸ì¡°í…Œì´ë¸”ëª…_ì°¸ì¡°í‚¤<br>
    **cartItems.user_id > users.id** : fk_cartItems_users_id<br>
    **likes_user_id > users.id** : fk_likes_users_id<br>


9. <span style="color:lightseagreen">**âœ¨ì¡°ì¸(ì •ê·œí™”)âœ¨**</span><br>
- **SELECT í•  ë•Œë§Œ ë³´ê¸° í¸í•˜ë¼ê³  í•´ì£¼ëŠ” ê²ƒì„!!(ì‹¤ì œë¡œ í…Œì´ë¸”ì„ ìƒì„±í•˜ì§„ ì•ŠìŒ!!)**<br>
(ê°€ìƒì˜ í…Œì´ë¸”ì„ ì„ì‹œë¡œ ëŒë ¤ì£¼ëŠ” ê²ƒ)<br>
- ê²Œì‹œê¸€ì˜ ì‚¬ìš©ì ë²ˆí˜¸ì™€ ì‚¬ìš©ìì˜ ì‚¬ìš©ì ë²ˆí˜¸ê°€ ê°™ìœ¼ë©´ ë¶™ì´ëŠ” ì¡°ê±´<br>
    ```sql
    SELECT * FROM posts LEFT
    JOIN users ON posts.user_id = users.id;
    ```
    ```sql
    SELECT posts.id, title, content, created_at, updated_at, name, job, birth  FROM posts LEFT
    JOIN users ON posts.user_id = users.id;
    ```
    ![alt text](../_programmers/img01/image-198.png)<br>

10.  **ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í–‰ ê°œìˆ˜**<br>
- count()ë¥¼ ì“°ë©´ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” í–‰ ê°œìˆ˜ ì¶œë ¥ ê°€ëŠ¥<br>
    ```sql
    SELECT count(*) FROM likes WHERE liked_book_id = 1;
    ```
    ![alt text](../_programmers/img01/image-343.png)<br>

11.  **ì¢‹ì•„ìš” ê°œìˆ˜ê°€ í¬í•¨ëœ books í…Œì´ë¸” ì¡°íšŒ**<br>
- ì„œë¸Œ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ ì¶œë ¥í•˜ê¸°<br>
    ```sql
    SELECT *, (SELECT count(*) FROM likes WHERE liked_book_id=books.id) AS likes FROM books;
    ```
    ![alt text](../_programmers/img01/image-347.png)<br>

12.  **ê°œë³„ ë„ì„œ ì¡°íšŒ ì‹œ, ì‚¬ìš©ìê°€ ì¢‹ì•„ìš”ë¥¼ í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í¬í•¨**<br>
- íŠ¹ì • ì±…ì˜ ìƒì„¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë™ì‹œì—<br>
- **ì¢‹ì•„ìš” ìˆ˜\(likes)ë¥¼ ê³„ì‚°**í•˜ê³ <br>
- **íŠ¹ì • ìœ ì €ê°€ ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ëŠ”ì§€ ì—¬ë¶€\(liked)ë¥¼ í™•ì¸**<br>
- ë˜í•œ **í•´ë‹¹ ì±…ì˜ ì¹´í…Œê³ ë¦¬ ì •ë³´**ë„ í•¨ê»˜ ê°€ì ¸ì˜´<br>
- ê²°ë¡  : ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì±…ì˜ ìƒì„¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤„ ë•Œ ìœ ì €ê°€ ì¢‹ì•„ìš”ë¥¼ ëˆŒë €ëŠ”ì§€ ì—¬ë¶€ì™€ ì¢‹ì•„ìš” ìˆ˜ë¥¼ í•¨ê»˜ í‘œì‹œ<br>
    ```sql
    SELECT *, 
        (SELECT count(*) FROM likes WHERE liked_book_id=books.id) AS likes,
        (SELECT EXISTS (SELECT * FROM likes WHERE user_id=1 AND liked_book_id=1)) AS liked 
        FROM books 
        LEFT JOIN category 
        ON books.category_id = category.category_id
        WHERE books.id=1;
    ```
    ![alt text](../_programmers/img01/image-356.png)<br>
<br><br/>


